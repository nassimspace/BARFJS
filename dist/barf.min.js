(function(){var b={};this.tmpl=function d(a,g){var e=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):b[a]=b[a]||d(document.getElementById(a).innerHTML);return g?e(g):e}})();
(function(){function b(a){for(var f=0,c=d.length;f<c;f++)for(var b=e.querySelectorAll(d[f][0]),h=0,g=b.length;h<g;h++)b[h][a].apply(b[h],d[f].slice(1))}function c(){b("removeEventListener")}function a(){e=e||document.getElementById("app");c();d=[];var a=location.hash.slice(1)||"/",f=g[a]||g["*"];if(f&&f.controller){var k=new f.controller;e&&f.templateId&&(f.onRefresh(function(){c();e.innerHTML=tmpl(f.templateId,k);b("addEventListener")}),k.$refresh())}}var g={},d=[],e=null,l=function(a,b,c){d.push([a,
b,c])},m=function(a){a.forEach(function(a){a()})};this.addEventListener("hashchange",a);this.addEventListener("load",a);this.route=function(a,b,c){"function"===typeof b&&(c=b,b=null);var e=[];Object.defineProperty(c.prototype,"$on",{value:l});Object.defineProperty(c.prototype,"$refresh",{value:m.bind(void 0,e)});g[a]={templateId:b,controller:c,onRefresh:e.push.bind(e)}}})();function barf(){}
barf.BLOCK=function(b){var c=document.currentScript||document.scripts[document.scripts.length-1],a=function(b){b=document.createElement(null);b.innerHTML=this.responseText;for(var e=b.getElementsByTagName("SCRIPT"),d=e.length-1;-1<d;--d){var h=e[d],f=document.createElement("script");f.innerHTML=h.innerHTML;for(var k=h.attributes.length-1;-1<k;--k)attribute=h.attributes[k],f.setAttribute(attribute.name,attribute.value);h.parentNode.replaceChild(f,h)}for(;b.firstChild;)c.parentNode.insertBefore(b.removeChild(b.firstChild),
c);c.parentNode.removeChild(c);this.removeEventListener("error",g);this.removeEventListener("load",a)},g=function(b){this.removeEventListener("error",g);this.removeEventListener("load",a);alert("there was an error!")},d=new XMLHttpRequest;d.addEventListener("error",g);d.addEventListener("load",a);d.open("GET",b,!0);d.send()};barf.HTML=function(b,c){fetch(b).then(function(a){return a.text()}).then(function(a){return document.getElementById(c).innerHTML=a})["catch"](function(a){return console.log(a)})};
barf.JS=function(b){var c=document.createElement("script");c.setAttribute("defer","");fetch(b).then(function(a){return a.text()}).then(function(a){return c.textContent=a}).then(function(a){return document.getElementsByTagName("body")[0].appendChild(c)})["catch"](function(a){return console.log(a)})};barf.CSS=function(b){var c=document.createElement("style");fetch(b).then(function(a){return a.text()}).then(function(a){return c.textContent=a}).then(function(a){return document.getElementsByTagName("head")[0].appendChild(c)})["catch"](function(a){return console.log(a)})};
function swapSrcAttributes(b){return function(c){c.setAttribute("src",c.getAttribute(b))}}function forEach(b,c){for(var a=0;a<b.length;a++)c(b[a])}function initDeferImages(){document.querySelectorAll("img[data-src]");var b=document.querySelectorAll("[data-src]");forEach(b,swapSrcAttributes("data-src"))}window.onload=function(){initDeferImages()};
